<!DOCTYPE html>
<html>
<head>
    <title>Result Page</title>
    <meta charset="UTF-8">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="css/styleforresult.css"> 
    
</head>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        getData();
      });
      function getData(){
        let url = window.location.href
        console.log(url)
        let data=url.split("/")[3];
        let sname=data.split("?")[1];
        let sbrand=data.split("?")[2];
        let ssolo=data.split("?")[3];
        sname_a = sname.replace('%20',' ')
        sbrand_a = sbrand.replace('%20',' ')
        ssolo_a = ssolo.replace('%20',' ')

        $.ajax({
            type: 'POST',
            url: 'http://localhost:8888/Result',
            dataType: 'json',
            data: {
                sname_a: sname_a,
                sbrand_a: sbrand_a,
                ssolo_a: ssolo_a,
                action: 'post'
            },
            success: function (json) {
                    console.log(json)
                    $.each(json, function( index, value ) {
                        document.getElementById("name").innerHTML = sname_a;
                        console.log(sbrand_a)
                        if(sbrand_a != '-'){
                            
                            document.getElementById("brand_name").innerHTML = value.song_brand;
                            
                        }else{
                            document.getElementById("brand").innerText = 'Solo Musician :'
                            document.getElementById("brand_name").innerHTML = value.song_solo_musician;
                        }
                        document.getElementById("type").innerHTML = value.song_type_song;
                        let pdate = value.song_produced_date.split("T")[0];
                        document.getElementById('pdate').innerHTML = pdate;
                        document.getElementById('detail').innerHTML = value.song_detail;
                        if(value.song_photo != null){
                            document.getElementById('cover').src = value.song_photo;
                        }else{
                            document.getElementById('cover').src = "https://raw.githubusercontent.com/Drive-Sound/Drive-Sound/project_p3/Drive%20sound/web%20project/public/images/cover%20song/cover.jpg";
                        }
                        console.log(value.song_chord);
                       
                }) 
                
            },
            error: function (data) {
                alert('data.responseJSON.error');
            }
        });
    }
function openchord(){
    document.getElementById('detail_section').innerHTML = hidden();
}
</script>
<body>
    <header class ="header">
        <a href="/Home"><img src="images/Logo_DriveSound-01.png" width="100px%"></a>
    <nav class ="nav">
        <a href="/Search">Search</a>
        <a href="/About_Us">About Us</a>
        <a href="/Account">Account</a>
        <a href="/logout">Logout</a>
    </nav>
    </header>
    <div class ="container">
        <div class="row">
            <div class="column-left">
                <div class="card">
                    <div class ="img-cover">
                        <br>
                        <img id = "cover" src = "" width="100%" style = "width: 180px;" height="auto">
                    </div>
                </div>
            </div>
            <div class="column-mid">
                <div class="card">
                    <h1 id ="name"></h1>
                    <hr>
                    <p>Produced on <a id ="pdate"></a></p>
                    <p>Rating : &#11088;&#11088;&#11088;&#11088; (140) </p>
                    <div id =" element">
                        <p id="brand" style="display: inline;">Brand :</p>
                        <a id = "brand_name" style="display: inline;" ></a> 
                    </div>
                    <p>Type : <a id ="type" ></a></p>
                    <hr>
                    <div class = "col-mid-upper-nav" >
                        <nav>
                            <br>
                            <a  >Detail</a>
                            <a onclick="openchord()">Chord</a>
                            <a >Lyric</a>
                            <a >Album</a>
                        </nav>
                     </div>
                     <div class ="detail" id ="detail_section">
                         <h2>Detail</h2>
                        <p>
                            <br><a id = "detail" ></a>
                            <br><br><br><br><br><hr>
                        </p>
                     </div>
                     <div class ="chord" id ="chord"></div>
                     <div class ="lyric" id ="lyric"></div>
                     <div class ="album" id ="album"></div>
                </div>
            </div>
            <div class="column-right">
                <div class="card">
                    <li><a  >Listened</a></li><br>
                    <li><a >Like</a></li><br>
                    <li><a >Add to List</a></li>
                </div>
                <div class ="next-page">
                    <a class="button" role="button" ><span class="text">Next Song</span></a>
                </div>
            </div>
        </div>
    </div>
    <footer class ="footer">
        <f>@drive sound</f>
    </footer>

</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.4.4/umd/popper.min.js"></script>
</html>